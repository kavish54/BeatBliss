<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recom-Result</title>
</head>
<body>
    <h1>Recom Result page</h1>
    <a href="{% url "add_playlist" playlist_id %}">Add to Playlist</a>
    {{ sid }}
    <br>
    {% for song in recommendations %}
    <h3>{{ song.song_name }}</h3>
    <h3> {{ song.song_id }} </h3>
    {% endfor %}
</body>
</html> 

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recom-Result</title>
    <script>
        function likeSong(songId) {
            fetch("/like-song/", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "X-CSRFToken": "{{ csrf_token }}"
                },
                body: JSON.stringify({ song_id: songId })
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === "success") {
                    alert("Song added to Liked Songs on Spotify!");
                } else {
                    alert("Error: " + data.message);
                }
            })
            .catch(error => console.error("Error:", error));
        }
    </script>
</head>
<body>
    <h1>Recom Result Page</h1>
    <a href="{% url 'add_playlist' playlist_id %}">Add Playlist</a>
    <br> Song ID: {{ sid }} <br>

    {% for song in recommendations %}
        <h3>{{ song.song_name }}</h3>
        <h3>{{ song.song_id }}</h3>
        <button onclick="likeSong('{{ song.song_id }}')">‚ù§Ô∏è Like</button>
        <br>
    {% endfor %}
</body>
</html> -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recommended Songs</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'recommApp/recom-result.css' %}">
</head>
<body>
    <nav>
        <div class="logo">BeatBliss</div>
        <ul>
            <li><a href={% url "genreHome" %}>Home</a></li>
            <li><a href={% url "recHome" %}>Recommender</a></li>

            {% if request.session.current_user %}
                <li><a href={% url "profile-page" %}> {{ request.session.current_user }} </a></li>
            {% else %}
                <li><a href={% url "login" %}>Login</a></li>
            {% endif %}
        </ul>
    </nav>

    <h1>üé∂ Recommended Songs</h1>

    <div class="container">
        <!-- <p>Selected Song ID: <strong>{{ sid }}</strong></p> -->
         <div class='top-content'>
            <h2>Your song:</h2>
            <button class='like-button-pl'><a class='like-playlist' href="{% url 'add_playlist' playlist_id %}">Add Playlist</a></button>
         </div>
         
        <div class="song-card">
            {% if current.image %}
                <img src="{{ current.image }}" alt="Album Art">
            {% else %}
                <img src="https://media.tacdn.com/media/attractions-splice-spp-674x446/0b/a9/99/ac.jpg" alt="No Image">
            {% endif %}
            <div class="song-info">
                <div class="song-name">{{ current.name }}</div>
                <div class="artist-name"> {{ current.artist }} </div>
            </div>
            <button class="like-button" onclick="likeSong('{{ sid }}')">‚ù§Ô∏è</button>
        </div>
        <div class="top-content">
            <h2>Similar songs:</h2>
        </div>
        {% if song_details %}
            {% for song in song_details %}
                <div class="song-card">
                    {% if song.image %}
                        <img src="{{ song.image }}" alt="Album Art">
                    {% else %}
                        <img src="https://media.tacdn.com/media/attractions-splice-spp-674x446/0b/a9/99/ac.jpg" alt="No Image">
                    {% endif %}
                    <div class="song-info">
                        <div class="song-name">{{ song.name }}</div>
                        <div class="artist-name"> {{ song.artist }} </div>
                    </div>
                    <button class="like-button" onclick="likeSong('{{ song.id }}')">‚ù§Ô∏è</button>
                </div>
            {% endfor %}
        {% else %}
            <p>No recommendations found.</p>
        {% endif %}
    </div>
    <script>
        function likeSong(songId) {
            fetch("/like-song/", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "X-CSRFToken": "{{ csrf_token }}"
                },
                body: JSON.stringify({ song_id: songId })
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === "success") {
                    alert("Song added to Liked Songs on Spotify!");
                } else {
                    alert("Error: " + data.message);
                }
            })
            .catch(error => console.error("Error:", error));
        }
    </script>
</body>
</html>
