{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeatBliss - Music Genre Classifier</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'genreApp/genre-home.css' %}">
</head>
<body class="body-color">
    <!-- Mobile menu overlay -->
    <div class="menu-overlay" onclick="toggleMenu()"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="left-section">
          <div class="logo">
            <span>â™«</span>
            <a href="#" class="brand">BeatBliss</a>
          </div>
        </div>
  
        <div class="nav-links">
          <a href="genreHome" class="nav-link">Home</a>
          <a href="recHome" class="nav-link">Recommender</a>
          <a href="#" class="nav-link">Discover</a>
          <a href="#" class="nav-link">About</a>
        </div>
  
        <div class="auth">
            {% if request.session.current_user %}
            <a href={% url "profile-page" %}
                ><img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Profile" class="profile-img"
            /></a>
            {% else %}
                <a href={% url "login" %}><h3>Login</h3></a>
            {% endif %}
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="hero-section">
        <div class="hero-content">
            <div class="music-visualizer">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
            <h1>Discover Your Music's Genre Identity</h1>
            <p>Our advanced AI analyzes your tracks and identifies their genre. Perfect for artists, producers, and music enthusiasts looking to categorize their sound.</p>
        </div>
    </div>

    <!-- Upload Section -->
    <div class="upload-section">
      <div class="upload-container">
          <h2>Upload Your Track</h2>
          <form action="" method="POST" enctype="multipart/form-data">
              {% csrf_token %}
              
              <div class="file-upload-wrapper">
                  <label for="file-upload" class="custom-file-upload">
                      <i class="fas fa-cloud-upload-alt"></i>
                      <p>Drag your audio file here</p>
                      <span>or click to browse</span>
                  </label>
                  {{ form.file }}
                  <div class="filename-display" id="filename-display"></div>
              </div>
              
              <button type="submit" class="submit-btn">Analyze Now</button>
          </form>
      </div>
  </div>

    <script>
    // Add event listener to the Django form field
    document.addEventListener('DOMContentLoaded', function() {
      const fileInput = document.getElementById('id_audio_file');
      if (fileInput) {
          fileInput.setAttribute('accept', 'audio/*');
          fileInput.style.display = 'none';
          fileInput.addEventListener('change', function() {
              displayFileName(this);
          });
      }
    });
    </script>
    // Script at the bottom of your HTML file
<script>
    // Toggle mobile menu
    function toggleMenu() {
      const navLinks = document.querySelector('.nav-links');
      const hamburger = document.querySelector('.hamburger');
      const menuOverlay = document.querySelector('.menu-overlay');
      
      navLinks.classList.toggle('active');
      hamburger.classList.toggle('active');
      menuOverlay.classList.toggle('active');
      
      // Prevent scrolling when menu is open
      if (navLinks.classList.contains('active')) {
          document.body.style.overflow = 'hidden';
      } else {
          document.body.style.overflow = 'auto';
      }
  }
  
  // Display filename when a file is selected
  function displayFileName(input) {
      const fileNameDisplay = document.getElementById('filename-display');
      if (input.files && input.files[0]) {
          fileNameDisplay.textContent = input.files[0].name;
      } else {
          fileNameDisplay.textContent = '';
      }
  }
  
  document.addEventListener('DOMContentLoaded', function() {
      const fileInput = document.getElementById('file-upload');
      const dropArea = document.querySelector('.custom-file-upload');
      
      if (fileInput && dropArea) {
          // Handle click to browse
          dropArea.addEventListener('click', function(e) {
              fileInput.click();
          });
          
          // Handle file selection
          fileInput.addEventListener('change', function() {
              displayFileName(this);
          });
          
          // Prevent default drag behaviors
          ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
              dropArea.addEventListener(eventName, preventDefaults, false);
          });
          
          function preventDefaults(e) {
              e.preventDefault();
              e.stopPropagation();
          }
          
          // Highlight drop area when item is dragged over it
          ['dragenter', 'dragover'].forEach(eventName => {
              dropArea.addEventListener(eventName, highlight, false);
          });
          
          ['dragleave', 'drop'].forEach(eventName => {
              dropArea.addEventListener(eventName, unhighlight, false);
          });
          
          function highlight() {
              dropArea.classList.add('highlight');
          }
          
          function unhighlight() {
              dropArea.classList.remove('highlight');
          }
          
          // Handle dropped files
          dropArea.addEventListener('drop', handleDrop, false);
          
          function handleDrop(e) {
              const dt = e.dataTransfer;
              const files = dt.files;
              
              if (files.length) {
                  fileInput.files = files;
                  displayFileName(fileInput);
                  
                  // Trigger change event manually
                  const event = new Event('change', { bubbles: true });
                  fileInput.dispatchEvent(event);
              }
          }
      }
  });
</script>
</body>
</html>