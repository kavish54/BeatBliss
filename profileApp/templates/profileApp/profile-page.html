<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Page</title>
    {% load static %}
    <link rel="stylesheet" href={% static "profileApp/profile-page.css" %}>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

    <!-- Profile Section -->
    <div class="profile-container">
        <img src="https://media.istockphoto.com/id/1403500817/photo/the-craggies-in-the-blue-ridge-mountains.jpg?s=612x612&w=0&k=20&c=N-pGA8OClRVDzRfj_9AqANnOaDS3devZWwrQNwZuDSk=" alt="Profile Photo" class="profile-photo">
        <div class="profile-info">
            <h2> {{ username }} </h2>
            <p> {{ request.session.current_user }} </p>
        </div>
    </div>

    <!-- Liked Playlists Section -->
    <div class="section">
        <h3>Your Liked Playlists</h3>
        {% if playlist_dict %}
            {% for playlist_id, playlist in playlist_dict.items %}  
                <div class="song-box">
                    <div class="song-header toggle-btn">
                        <span>Playlist ID: {{ playlist_id }}</span>
                        <button class="toggle-icon">▼</button>
                    </div>
                    <div class="recommendations">
                        {% for song in playlist.songs %}
                            <div class="song">
                                <img src="{{ song.image_url }}" alt="Song Cover" class="song-img">
                                <div>
                                    <strong>{{ song.title }}</strong> - {{ song.artist }}<br>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>No liked playlists found.</p>
        {% endif %}
    </div>

    <!-- Recently Created Playlists Section -->
    <div class="section">
        <h3>Recently Created Playlists</h3>
        {% if history_dict %}
            {% for playlist_id, playlist in history_dict.items %}  
                <div class="song-box">
                    <div class="song-header toggle-btn">
                        <span>Playlist ID: {{ playlist_id }}</span>
                        <button class="toggle-icon">▼</button>
                    </div>
                    <div class="recommendations">
                        {% for song in playlist.songs %}
                            <div class="song">
                                <img src="{{ song.image_url }}" alt="Song Cover" class="song-img">
                                <div>
                                    <strong>{{ song.title }}</strong> - {{ song.artist }}<br>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>No recently created playlists found.</p>
        {% endif %}
    </div>

    <script>
        $(document).ready(function() {
            $(".toggle-btn").click(function() {
                $(this).closest(".song-box").find(".recommendations").slideToggle();
            });
        });
    </script>

</body>
</html>
